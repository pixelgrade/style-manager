!function(){"use strict";var e={d:function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return o}});function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i="color-scheme-dark-temp";var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,o,a;return t=e,(o=[{key:"initialize",value:function(){var e,t,n=this;this.darkModeSetting=null===(e=window.document.documentElement.dataset)||void 0===e?void 0:e.darkModeAdvanced,this.matchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.storageItemKey="color-scheme-dark",this.callbacks=[],t=function(){var e,t,o;(function(){try{return window.self!==window.top}catch(e){return!0}}()&&(null===(e=window)||void 0===e||null===(t=e.parent)||void 0===t||null===(o=t.wp)||void 0===o?void 0:o.customize)||window.document.body.classList.contains("logged-in"))&&(localStorage.removeItem(i),n.storageItemKey=i),n.initializeCustomizePreview(),n.bindEvents(),n.update()},"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)}},{key:"initializeCustomizePreview",value:function(){var e,t,n,o=this,a=(null===(e=window.wp)||void 0===e?void 0:e.customize)||(null===(t=window.parent)||void 0===t||null===(n=t.wp)||void 0===n?void 0:n.customize);a&&a("sm_dark_mode_advanced",(function(e){o.darkModeSetting=e(),e.bind((function(e){o.darkModeSetting=e,localStorage.removeItem(i),o.update()}))}))}},{key:"bindEvents",value:function(){var e,t,n,o,a=this;e=document.documentElement,t="click",n=".js-sm-dark-mode-toggle",o=this.onClick.bind(this),e.addEventListener(t,(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(n)){o.call(t,e);break}}),!1),this.matchMedia.addEventListener("change",(function(){localStorage.removeItem(i),a.update()}))}},{key:"bind",value:function(e){var t=this.callbacks.indexOf(e);"function"==typeof e&&-1===t&&this.callbacks.push(e)}},{key:"unbind",value:function(e){var t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)}},{key:"onClick",value:function(e){e.preventDefault(),localStorage.setItem(this.storageItemKey,this.isCompiledDark()?"light":"dark"),this.update()}},{key:"isSystemDark",value:function(){var e="on"===this.darkModeSetting;return"auto"===this.darkModeSetting&&this.matchMedia.matches&&(e=!0),e}},{key:"isCompiledDark",value:function(){var e=this.isSystemDark(),t=localStorage.getItem(this.storageItemKey);return null!==t&&(e="dark"===t),e}},{key:"update",value:function(){var e=this.isCompiledDark();this.callbacks.forEach((function(t){t(e)})),e?window.document.documentElement.classList.add("is-dark"):window.document.documentElement.classList.remove("is-dark")}}])&&n(t.prototype,o),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}());(window.sm=window.sm||{}).darkMode=t}();