!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return d}});var n=window.jQuery,i=e.n(n);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=".is-color-scheme-switcher-button",a="color-scheme-dark-temp",u=!!wp.customize,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$element=i()(t),this.$html=i()("html"),this.$colorSchemeButtons=i()(r),this.$colorSchemeButtonsLink=this.$colorSchemeButtons.children("a"),this.matchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeSetting=this.$html.data("dark-mode-advanced"),this.theme=null,this.initialize()}var t,n,d;return t=e,(n=[{key:"initialize",value:function(){localStorage.removeItem(a),this.bindEvents(),this.bindCustomizer(),this.update()}},{key:"bindEvents",value:function(){var e=this;i()(document).on("click",r,this.onClick.bind(this)),this.matchMedia.addEventListener("change",(function(){localStorage.removeItem(a),e.update()}))}},{key:"bindCustomizer",value:function(){var e=this;wp.customize&&wp.customize.bind("ready",(function(){wp.customize("sm_dark_mode_advanced",(function(t){var n,i;localStorage.removeItem(a),e.darkModeSetting=t(),e.update(),t.bind((function(t,n){localStorage.removeItem(a),e.darkModeSetting=t,e.update()}));var o=null===(n=wp)||void 0===n||null===(i=n.customize)||void 0===i?void 0:i.previewer;o&&o.bind("ready",(function(){var t=o.preview.targetWindow();e.$html=e.$html.add(t.document.documentElement)}))}))}))}},{key:"onClick",value:function(e){e.preventDefault();var t=this.isCompiledDark();localStorage.setItem(this.getStorageItemKey(),t?"light":"dark"),this.update()}},{key:"getStorageItemKey",value:function(){return u?a:"color-scheme-dark"}},{key:"isSystemDark",value:function(){var e="on"===this.darkModeSetting;return"auto"===this.darkModeSetting&&this.matchMedia.matches&&(e=!0),e}},{key:"isCompiledDark",value:function(){var e=this.isSystemDark(),t=localStorage.getItem(this.getStorageItemKey());return null!==t&&(e="dark"===t),e}},{key:"update",value:function(){this.$html.toggleClass("is-dark",this.isCompiledDark())}}])&&o(t.prototype,n),d&&o(t,d),e}();new d;(window.sm=window.sm||{}).darkMode=t}();